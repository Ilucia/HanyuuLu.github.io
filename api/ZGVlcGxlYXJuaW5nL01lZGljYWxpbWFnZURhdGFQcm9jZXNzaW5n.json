{"title":"Medical image Data Processing","date":"2019-02-03T00:00:00.000Z","link":"deeplearning/MedicalimageDataProcessing","tags":["deep learning, medical, image, gile processing08-6"],"updated":"2022-04-27T15:24:01.719Z","content":"<blockquote>\n<p>转载自<a href=\"https://zhuanlan.zhihu.com/p/23738974\" target=\"_blank\" rel=\"noopener\">医疗影像数据处理–python处理nifti数据</a></p>\n</blockquote>\n<ul>\n<li>dicom<br>\ndicom是由磁共振设备扫描产生的,一般是一个slice一个文件,<br>\n分析格式: .img/.hdr</li>\n<li>nifti<br>\n由fsl \\ afni \\ spm 共同确定的格式,支持3D,4D影响<br>\n分析格式: img/hdr<br>\ndicom -----&gt; nifti 影像处理流程</li>\n</ul>\n<ol>\n<li>利用spm将dicom原始数据转换为 分析格式:<em>.img 和</em>.hdr</li>\n<li>利用dcm2nifti工具将dicom数据转为nifti 3d数据</li>\n<li>利用spm进行3d转为4d<br>\n处理nifti数据的可用工具：matlab\\ITK\\VTK\\python.<br>\n我们使用python处理该类型的数据<br>\n开发工具</li>\n<li>语言python2.7</li>\n<li>python module: nipy scipy nibabel matplotlib</li>\n</ol>\n<h3 id=\"获取数据形态信息及头信息\"><a class=\"markdownIt-Anchor\" href=\"deeplearning/MedicalimageDataProcessing#获取数据形态信息及头信息\"></a> 获取数据形态信息及头信息<a href=\"deeplearning/MedicalimageDataProcessing#获取数据形态信息及头信息\"></a></h3>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#-*- coding=utf8 -*-</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> nibabel <span class=\"keyword\">as</span> nib</span><br><span class=\"line\"><span class=\"comment\">#import os</span></span><br><span class=\"line\"><span class=\"comment\">#from nibabel.testing import data_path</span></span><br><span class=\"line\"><span class=\"comment\">#d_path= os.path.join(data_path,\"1.nii\")</span></span><br><span class=\"line\"><span class=\"comment\">#data1= nib.load(d_path)</span></span><br><span class=\"line\">data1= nib.load(<span class=\"string\">\"1.nii\"</span>)</span><br><span class=\"line\"><span class=\"comment\">#数据形状</span></span><br><span class=\"line\"><span class=\"keyword\">print</span> data1.shape</span><br><span class=\"line\"><span class=\"keyword\">print</span> data1.affine.shape</span><br><span class=\"line\">img = data1.get_data()</span><br><span class=\"line\"><span class=\"comment\">#数据形状,矩阵数据每一维的数据尺寸</span></span><br><span class=\"line\"><span class=\"keyword\">print</span> img.shape</span><br><span class=\"line\"><span class=\"comment\">#数据头信息</span></span><br><span class=\"line\"><span class=\"keyword\">print</span> data1.header</span><br></pre></td></tr></table></div></figure>\n<h3 id=\"获取slice信息生成图像\"><a class=\"markdownIt-Anchor\" href=\"deeplearning/MedicalimageDataProcessing#获取slice信息生成图像\"></a> 获取slice信息生成图像<a href=\"deeplearning/MedicalimageDataProcessing#获取slice信息生成图像\"></a></h3>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#-*- coding=utf8 -*-</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> nibabel <span class=\"keyword\">as</span> nib</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\">#把slice数据生成图片的方法</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">show_img</span><span class=\"params\">(slices)</span>:</span></span><br><span class=\"line\">fig, axes = plt.subplots(<span class=\"number\">1</span>, len(slices))</span><br><span class=\"line\"><span class=\"keyword\">for</span> i, slice <span class=\"keyword\">in</span> enumerate(slices):</span><br><span class=\"line\">axes[i].imshow(slice.T, cmap=<span class=\"string\">\"gray\"</span>, origin=<span class=\"string\">\"lower\"</span>)</span><br><span class=\"line\"><span class=\"comment\">#读取nifti文件中的slice数据</span></span><br><span class=\"line\">data1= nib.load(<span class=\"string\">\"/home/lee/nifti/1.nii.gz\"</span>)</span><br><span class=\"line\">img = data1.get_data()</span><br><span class=\"line\"><span class=\"comment\">#获取单张slice数据</span></span><br><span class=\"line\">slice_0 = img[<span class=\"number\">26</span>, :, :]</span><br><span class=\"line\">slice_1 = img[:, <span class=\"number\">30</span>, :]</span><br><span class=\"line\">slice_2 = img[:, :, <span class=\"number\">16</span>]</span><br><span class=\"line\"><span class=\"comment\">#生成图表</span></span><br><span class=\"line\">show_img([slice_0, slice_1, slice_2])</span><br><span class=\"line\">plt.suptitle(<span class=\"string\">\"show slice image\"</span>)</span><br></pre></td></tr></table></div></figure>","prev":{"title":"炼丹路上那些踩过的坑","link":"Tensorflow/commomQuestion"},"next":{"title":"terminology in deeplearning","link":"Tensorflow/terminology"},"plink":"ilucia.github.io/deeplearning/MedicalimageDataProcessing/","copyright":{"author":"Ilucia Niu","license":"<a rel=\"license\" href=\"http://creativecommons.org/licenses/by/4.0/\">知识共享署名 4.0 国际许可协议</a>","published":"2019年2月3日","updated":"2022年4月27日"}}