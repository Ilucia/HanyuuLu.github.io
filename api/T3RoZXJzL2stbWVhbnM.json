{"title":"ç®€å•çš„k-meanså®è·µ","date":"2019-07-15T00:00:00.000Z","link":"Others/k-means","tags":["k-means","python"],"updated":"2022-04-27T15:24:01.559Z","content":"<blockquote>\n<p>æœ¬æ–‡æ¥è‡ªäºç¬”è€…åœ¨è‚æ•°æ¨¡è¿‡ç¨‹ä¸­çš„äº²èº«å®è·µï¼Œå¦‚æœä»…ä»…æ˜¯äº†è§£å¯ä»¥ç›´æ¥è§‚çœ‹ï¼Œå¦‚æœæƒ³è¦å¤ç°å¯ä»¥æˆ³<a href=\"https://github.com/HanyuuFurude/MCM-2019-College/tree/master/%E5%9B%BD%E8%B5%9B%E8%AE%AD%E7%BB%83/2019%E5%9F%B9%E8%AE%AD4/code\" target=\"_blank\" rel=\"noopener\">å®è·µç¯å¢ƒ</a>è·å¾—å¼€å‘ç¯å¢ƒï¼ˆå¤„äºå®‰å…¨è€ƒè™‘ï¼Œåœ¨2019å¹´å›½èµ›æ‰“å®Œä¹‹å‰æ­¤é“¾æ¥çš„ä»“åº“ä¸ºprivateï¼Œè¯·è°…è§£ï¼‰</p>\n</blockquote>\n<h1 id=\"åœºæ™¯æ¦‚è¿°\"><a class=\"markdownIt-Anchor\" href=\"Others/k-means#åœºæ™¯æ¦‚è¿°\"></a> åœºæ™¯æ¦‚è¿°<a href=\"Others/k-means#åœºæ™¯æ¦‚è¿°\"></a></h1>\n<p>ç¬”è€…éœ€è¦å¯¹ä¸€ä¸ªexcelæ•°æ®è¡¨ä¸­çš„è®°å½•ï¼ˆå«æœ‰ç»çº¬åº¦ä¿¡æ¯ï¼‰ï¼Œè¡¨æ ¼å­—æ®µå¦‚ä¸‹</p>\n<div class=\"article-bounded\"><div class=\"article-table\"><table>\n<thead>\n<tr>\n<th>A</th>\n<th>B</th>\n<th>C</th>\n<th>D</th>\n<th>E</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ä»»åŠ¡å·ç </td>\n<td>ä»»åŠ¡gpsçº¬åº¦</td>\n<td>ä»»åŠ¡gpsç»åº¦</td>\n<td>ä»»åŠ¡æ ‡ä»·</td>\n<td>ä»»åŠ¡æ‰§è¡Œæƒ…å†µ</td>\n</tr>\n</tbody>\n</table></div></div>\n<p>æˆ‘ä»¬ç°åœ¨éœ€è¦å°†å­—æ®µBå’ŒCä¸­çš„ç»çº¬åº¦æå–ä¸ºåæ ‡å¹¶å°†è¿™äº›åæ ‡åˆ†ç±»ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨k-meansæ–¹æ³•æ¥å¤§è‡´è§‚å¯Ÿåæ ‡å¹¶åˆ†ç±»ï¼ˆæ‰‹åŠ¨å®ç°æ²¡ç”¨è½®å­.jpgï¼‰</p>\n<h1 id=\"å®éªŒç¯å¢ƒ\"><a class=\"markdownIt-Anchor\" href=\"Others/k-means#å®éªŒç¯å¢ƒ\"></a> å®éªŒç¯å¢ƒ<a href=\"Others/k-means#å®éªŒç¯å¢ƒ\"></a></h1>\n<ul>\n<li>python 3(ç¬”è€…ä½¿ç”¨python 3.6)</li>\n</ul>\n<h1 id=\"åŸºæœ¬åŸç†\"><a class=\"markdownIt-Anchor\" href=\"Others/k-means#åŸºæœ¬åŸç†\"></a> åŸºæœ¬åŸç†<a href=\"Others/k-means#åŸºæœ¬åŸç†\"></a></h1>\n<h2 id=\"k-means\"><a class=\"markdownIt-Anchor\" href=\"Others/k-means#k-means\"></a> k-means<a href=\"Others/k-means#k-means\"></a></h2>\n<p>k-meansçš„å¤§è‡´æ€è·¯</p>\n<ul>\n<li>åœ¨æ•°æ®é›†ä¸­éšæœºæŒ‘é€‰xä¸ªæ•°æ®ä½œä¸ºä¸­å¿ƒç‚¹ï¼ˆxä¸ºèšç±»æ•°é‡ï¼‰ï¼›</li>\n<li>æ¯ä¸ªæ•°æ®æŒ‘é€‰æœ€è¿‘çš„ä¸­å¿ƒç‚¹ï¼Œå›´ç»•è¿™ä¸ªä¸­å¿ƒç‚¹çš„æ‰€æœ‰æ•°æ®ç‚¹æˆä¸ºä¸€ä¸ªèšç±»ã€‚ï¼ˆæ­¤å¤„æˆ‘ä»¬çš„è·ç¦»ä½¿ç”¨æ¬§æ°è·ç¦»ï¼‰ï¼›</li>\n<li>å®Œæˆï¼</li>\n</ul>\n<h2 id=\"ä¸€äº›ä¸å°½å¦‚äººæ„çš„åœ°æ–¹å’Œé—®é¢˜\"><a class=\"markdownIt-Anchor\" href=\"Others/k-means#ä¸€äº›ä¸å°½å¦‚äººæ„çš„åœ°æ–¹å’Œé—®é¢˜\"></a> ä¸€äº›ä¸å°½å¦‚äººæ„çš„åœ°æ–¹å’Œé—®é¢˜<a href=\"Others/k-means#ä¸€äº›ä¸å°½å¦‚äººæ„çš„åœ°æ–¹å’Œé—®é¢˜\"></a></h2>\n<ul>\n<li>æ•°æ®é›†æœ¬èº«ä½ç½®ï¼Œäº‹å…ˆæœªå¿…èƒ½è¾ƒä¸ºå‡†ç¡®çš„é¢„ä¼°èšç±»çš„ä¸ªæ•°ï¼ˆç”šè‡³å¤§è‡´èŒƒå›´ä¹Ÿéš¾ä»¥ç¡®å®šï¼‰ï¼›</li>\n<li>ç”±äºæŒ‘é€‰èšç±»æ˜¯éšæœºçš„ï¼Œå¯èƒ½è¿™äº›ç‚¹é€‰æ‹©çš„ä¸å°½äººæ„ã€‚</li>\n<li>å¦‚ä½•è¯„ä¼°éšæœºç”Ÿæˆçš„èšç±»ä¸­å¿ƒçš„è´¨é‡ï¼Ÿ</li>\n</ul>\n<h1 id=\"æˆæœé¢„è§ˆ\"><a class=\"markdownIt-Anchor\" href=\"Others/k-means#æˆæœé¢„è§ˆ\"></a> æˆæœé¢„è§ˆ<a href=\"Others/k-means#æˆæœé¢„è§ˆ\"></a></h1>\n<blockquote>\n<p>P.S. æ­¤å¤„å±•ç¤ºäº†èšç±»ä¸º3çš„è¾“å‡ºï¼Œåœ°å›¾æ˜¯åæœŸé€šè¿‡å…¶ä»–æ–¹å¼è´´åˆä¸Šå»çš„ï¼Œè‡³äºè´´åˆæ–¹æ³•â€¦â€¦æœ‰ç¼˜æ›´æ–°å§â€¦â€¦</p>\n</blockquote>\n<p><img src=\"/Others/k-means/1563289902403.png\" alt=\"\" class=\"article-img\"></p>\n<p><img src=\"k-means/1563289902403.png\" alt=\"\" class=\"article-img\"></p>\n<h1 id=\"è§£å†³æ–¹æ¡ˆå®ç°\"><a class=\"markdownIt-Anchor\" href=\"Others/k-means#è§£å†³æ–¹æ¡ˆå®ç°\"></a> è§£å†³æ–¹æ¡ˆ&amp;å®ç°<a href=\"Others/k-means#è§£å†³æ–¹æ¡ˆå®ç°\"></a></h1>\n<h3 id=\"èšç±»é€»è¾‘ä»£ç \"><a class=\"markdownIt-Anchor\" href=\"Others/k-means#èšç±»é€»è¾‘ä»£ç \"></a> èšç±»é€»è¾‘ä»£ç <a href=\"Others/k-means#èšç±»é€»è¾‘ä»£ç \"></a></h3>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> math <span class=\"keyword\">import</span> sqrt</span><br><span class=\"line\"><span class=\"keyword\">from</span> random <span class=\"keyword\">import</span> randint, random</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> dataReader <span class=\"keyword\">import</span> dataReader</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Classifier</span>:</span></span><br><span class=\"line\">    <span class=\"comment\"># åˆå§‹åŒ–ã€è¯»å…¥æ•°æ®åº“ã€æ ‡å®šæ•°æ®èŒƒå›´</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"comment\"># åŸå§‹æ•°æ®</span></span><br><span class=\"line\">        self.rawData = dataReader()[<span class=\"number\">0</span>]</span><br><span class=\"line\">        <span class=\"comment\"># ä¸‹æ ‡ä¸‹é™</span></span><br><span class=\"line\">        self.LOWER_LIMIT = <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"comment\"># ä¸‹æ ‡ä¸Šé™</span></span><br><span class=\"line\">        self.UPPER_LIMIT = len(self.rawData) - <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># äº§ç”Ÿä¸€ç»„ä¸é‡å¤çš„éšæœºä¸­å¿ƒ</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">generateRandomCenter</span><span class=\"params\">(self, typeCount: int)</span>:</span></span><br><span class=\"line\">        <span class=\"comment\"># éšæœºä¸­å¿ƒï¼ˆèšç±»ï¼‰æ•°</span></span><br><span class=\"line\">        self.typeCount = typeCount</span><br><span class=\"line\">        <span class=\"comment\"># éšæœºä¸­å¿ƒç¼–å·åˆ—è¡¨</span></span><br><span class=\"line\">        self.coreList = list()</span><br><span class=\"line\">        <span class=\"keyword\">while</span> len(self.coreList) &lt; self.typeCount:</span><br><span class=\"line\">            key = randint(self.LOWER_LIMIT, self.UPPER_LIMIT)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> key <span class=\"keyword\">in</span> self.coreList:</span><br><span class=\"line\">                <span class=\"keyword\">continue</span></span><br><span class=\"line\">            self.coreList.append(key)</span><br><span class=\"line\">        <span class=\"comment\"># print('[center]%s' % str(self.coreList))</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># èšç±»è®¡ç®—</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">calc</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"comment\"># èšç±»åˆ—è¡¨</span></span><br><span class=\"line\">        self.classList = [list() <span class=\"keyword\">for</span> _ <span class=\"keyword\">in</span> range(self.typeCount)]</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> self.rawData:</span><br><span class=\"line\">            key = float(<span class=\"string\">'inf'</span>)</span><br><span class=\"line\">            ptr = <span class=\"number\">-1</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> self.coreList:</span><br><span class=\"line\">                distance = dis(i, self.rawData[j])</span><br><span class=\"line\">                <span class=\"keyword\">if</span> key &gt; distance:</span><br><span class=\"line\">                    ptr = self.coreList.index(j)</span><br><span class=\"line\">                    key = distance</span><br><span class=\"line\">            self.classList[ptr].append(i)</span><br><span class=\"line\">        <span class=\"comment\"># print('[info] calc finished ğŸ˜‚')</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># ç»˜åˆ¶èšç±»å›¾</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">draw</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        plt.rcParams[<span class=\"string\">'font.sans-serif'</span>] = [<span class=\"string\">'SimHei'</span>]</span><br><span class=\"line\">        plt.rcParams[<span class=\"string\">'axes.unicode_minus'</span>] = <span class=\"keyword\">False</span></span><br><span class=\"line\">        plt.figure(figsize=(<span class=\"number\">30</span>, <span class=\"number\">20</span>), dpi=<span class=\"number\">100</span>)</span><br><span class=\"line\">        plt.xlim(<span class=\"number\">112</span>, <span class=\"number\">115</span>)</span><br><span class=\"line\">        plt.ylim(<span class=\"number\">22</span>, <span class=\"number\">24</span>)</span><br><span class=\"line\">        plt.xlabel(<span class=\"string\">'ç»åº¦/Â°E'</span>)</span><br><span class=\"line\">        plt.ylabel(<span class=\"string\">'çº¬åº¦/Â°N'</span>)</span><br><span class=\"line\">        plt.title(</span><br><span class=\"line\">            <span class=\"string\">'%d centers with average distance %.4f'</span></span><br><span class=\"line\">            % (self.typeCount, self.totalAverage)</span><br><span class=\"line\">        )</span><br><span class=\"line\">        <span class=\"comment\"># print(str(self.coreList))</span></span><br><span class=\"line\">        handerList = list()</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> self.classList:</span><br><span class=\"line\">            col = (random(), random(), random())</span><br><span class=\"line\">            handerList.append(</span><br><span class=\"line\">                plt.plot([x[<span class=\"number\">2</span>] <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> i], [x[<span class=\"number\">1</span>] <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> i],</span><br><span class=\"line\">                     <span class=\"string\">'x'</span>, color=col)</span><br><span class=\"line\">            )</span><br><span class=\"line\">        <span class=\"comment\"># plt.text(112.74, 23.8, str(self.coreList), ha='left', fontsize=8)</span></span><br><span class=\"line\">        plt.legend(self.coreList)</span><br><span class=\"line\">        plt.draw()</span><br><span class=\"line\">        <span class=\"comment\"># plt.show()</span></span><br><span class=\"line\">        <span class=\"comment\"># plt.text(4, 1, t, ha='left', rotation=15, wrap=True)</span></span><br><span class=\"line\">        plt.savefig(<span class=\"string\">'resPic\\%s.jpg'</span> % str(self.typeCount))</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># è®¡ç®—å¾—åˆ†ï¼ˆå¹³å‡è·ç¦»ï¼‰</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">score</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"comment\"># æ¯ä¸ªåˆ†ç»„çš„å¹³å‡è·ç¦»</span></span><br><span class=\"line\">        self.averageList = list()</span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            <span class=\"keyword\">for</span> key <span class=\"keyword\">in</span> range((len(self.coreList))):</span><br><span class=\"line\">                self.averageList.append(</span><br><span class=\"line\">                    sum([dis(x, self.rawData[self.coreList[key]])</span><br><span class=\"line\">                         <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> self.classList[key]]) /</span><br><span class=\"line\">                    len(self.classList[key])</span><br><span class=\"line\">                )</span><br><span class=\"line\">        <span class=\"keyword\">except</span> Exception:</span><br><span class=\"line\">            Exception(<span class=\"string\">\"bad center!\"</span>)</span><br><span class=\"line\">        <span class=\"comment\"># print('[average]')</span></span><br><span class=\"line\">        self.totalAverage = <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"comment\"># åŠ æƒå¹³å‡</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> self.averageList:</span><br><span class=\"line\">            self.totalAverage +=  \\</span><br><span class=\"line\">                i*len(self.classList[self.averageList.index(i)])</span><br><span class=\"line\">            <span class=\"comment\"># print('\\t[group %d]\\t%f' % (self.averageList.index(i), i))</span></span><br><span class=\"line\">        self.totalAverage /= len(self.rawData)</span><br><span class=\"line\">        <span class=\"comment\"># print('\\t[total]\\t\\t%f' % self.totalAverage)</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.totalAverage</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># å•æ¬¡è¿è¡Œ</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">run</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        self.generateRandomCenter(<span class=\"number\">10</span>)</span><br><span class=\"line\">        self.calc()</span><br><span class=\"line\">        self.score()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># ç»™å®šèšç±»æ•°å¤šæ¬¡éšæœºå–è¡¨ç°è¾ƒå¥½å€¼</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">des</span><span class=\"params\">(self, typeCount: int)</span>:</span></span><br><span class=\"line\">        <span class=\"comment\"># æœ€ä¼˜ç»“æœã€å¾—åˆ†æš‚å­˜å˜é‡</span></span><br><span class=\"line\">        score = float(<span class=\"string\">'inf'</span>)</span><br><span class=\"line\">        resList = <span class=\"keyword\">None</span></span><br><span class=\"line\">        <span class=\"comment\"># è¿ç»­connæ¬¡æ²¡æœ‰å¾—åˆ°æ›´ä¼˜åŒ–çš„ç»“æœçš„æ¬¡æ•°</span></span><br><span class=\"line\">        conn = <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"comment\"># å°è¯•æ¬¡æ•°è®¡æ•°å™¨</span></span><br><span class=\"line\">        counter = <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (conn &lt; <span class=\"number\">100</span>):</span><br><span class=\"line\">            counter += <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"comment\"># print('[attempt %d with %d times better]' % (counter, conn))</span></span><br><span class=\"line\">            self.generateRandomCenter(typeCount)</span><br><span class=\"line\">            self.calc()</span><br><span class=\"line\">            <span class=\"keyword\">try</span>:</span><br><span class=\"line\">                tempScore = self.score()</span><br><span class=\"line\">            <span class=\"keyword\">except</span> Exception:</span><br><span class=\"line\">                print(<span class=\"string\">\"[ERROR]\\tbad center occured skip.\"</span>)</span><br><span class=\"line\">                <span class=\"keyword\">continue</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> tempScore &lt; score:</span><br><span class=\"line\">                resList = self.coreList</span><br><span class=\"line\">                score = tempScore</span><br><span class=\"line\">                conn = <span class=\"number\">0</span></span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                conn += <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"comment\"># è¿˜åŸæœ€ä½³èšç±»ç°åœºä»¥ä¾¿åç»­ç”»å›¾</span></span><br><span class=\"line\">        self.coreList = resList</span><br><span class=\"line\">        self.calc()</span><br><span class=\"line\">        print(<span class=\"string\">'[info]\\tdes finish with best score %f'</span> % score)</span><br><span class=\"line\">        print(resList)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> resList</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">dis</span><span class=\"params\">(obj1: list, obj2: list)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">assert</span> isinstance(obj1, list), \\</span><br><span class=\"line\">        <span class=\"string\">'[ERROR] ç¬¬ä¸€ä¸ªå‚æ•°åº”å½“ä¸ºlist,è¾“å…¥çš„å‚æ•°ç±»å‹ä¸º$s'</span> % str(type(obj1))</span><br><span class=\"line\">    <span class=\"keyword\">assert</span> isinstance(obj2, list), \\</span><br><span class=\"line\">        <span class=\"string\">'[ERROR] ç¬¬äºŒä¸ªå‚æ•°åº”å½“ä¸ºlist,è¾“å…¥çš„å‚æ•°ç±»å‹ä¸º$s'</span> % str(type(obj2))</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sqrt((obj1[<span class=\"number\">1</span>] - obj2[<span class=\"number\">1</span>]) ** <span class=\"number\">2</span> + (obj1[<span class=\"number\">2</span>] - obj2[<span class=\"number\">2</span>]) ** <span class=\"number\">2</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    exp = Classifier()</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">3</span>, <span class=\"number\">20</span>):</span><br><span class=\"line\">        print(<span class=\"string\">'[center counter]\\t%d'</span> % i)</span><br><span class=\"line\">        exp.des(i)</span><br><span class=\"line\">        exp.draw()</span><br></pre></td></tr></table></div></figure>\n<h3 id=\"æ•°æ®å¤„ç†å’Œè¯»å…¥ä»£ç \"><a class=\"markdownIt-Anchor\" href=\"Others/k-means#æ•°æ®å¤„ç†å’Œè¯»å…¥ä»£ç \"></a> æ•°æ®å¤„ç†å’Œè¯»å…¥ä»£ç <a href=\"Others/k-means#æ•°æ®å¤„ç†å’Œè¯»å…¥ä»£ç \"></a></h3>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> xlrd</span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"comment\"># import datetime</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">dataConverter</span><span class=\"params\">(src: list)</span>-&gt;list:</span></span><br><span class=\"line\">    res = list()</span><br><span class=\"line\">    res.append(src[<span class=\"number\">0</span>])</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">1</span>, <span class=\"number\">4</span>):</span><br><span class=\"line\">        res.append(src[i])</span><br><span class=\"line\">    res.append(int(src[<span class=\"number\">4</span>]))</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">dataReader</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    fileName = <span class=\"keyword\">None</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        fileName = sys.argv[<span class=\"number\">-1</span>]</span><br><span class=\"line\">        print(<span class=\"string\">'[fileName]%s'</span> % fileName)</span><br><span class=\"line\">    <span class=\"keyword\">except</span> Exception:</span><br><span class=\"line\">        print(<span class=\"string\">'no file name'</span>)</span><br><span class=\"line\">    data = list()</span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        workbook = xlrd.open_workbook(filename=fileName)</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(workbook.nsheets):</span><br><span class=\"line\">            data.append(list())</span><br><span class=\"line\">            rangeRow = workbook.sheet_by_index(i).nrows</span><br><span class=\"line\">            sheet = workbook.sheet_by_index(i)</span><br><span class=\"line\">            <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> range(rangeRow):</span><br><span class=\"line\">                temp = sheet.row_values(x)</span><br><span class=\"line\">                <span class=\"keyword\">if</span> temp[<span class=\"number\">0</span>] == <span class=\"string\">'ä»»åŠ¡å·ç '</span>:</span><br><span class=\"line\">                    <span class=\"keyword\">continue</span></span><br><span class=\"line\">                data[i].append(dataConverter(temp))</span><br><span class=\"line\">    <span class=\"keyword\">except</span> Exception <span class=\"keyword\">as</span> e:</span><br><span class=\"line\">        print(<span class=\"string\">'bad data file'</span>)</span><br><span class=\"line\">        print(<span class=\"string\">'\\t[Exception]\\t%s'</span> % str(e))</span><br><span class=\"line\">        exit()</span><br><span class=\"line\">    <span class=\"comment\"># for i in data:</span></span><br><span class=\"line\">    <span class=\"comment\">#     for x in i:</span></span><br><span class=\"line\">    <span class=\"comment\">#         print(x)</span></span><br><span class=\"line\">    print(<span class=\"string\">'ğŸ˜€[info]\\tdata fetched successfully'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    data = dataReader()</span><br><span class=\"line\">    <span class=\"keyword\">for</span> sheet <span class=\"keyword\">in</span> data:</span><br><span class=\"line\">        <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> sheet:</span><br><span class=\"line\">            print(x)</span><br></pre></td></tr></table></div></figure>","prev":{"title":"æå‡Powershellä½¿ç”¨ä½“éªŒ","link":"windows/oh-my-posh"},"next":{"title":"Pythonä¸­éå†Listæ—¶åˆ é™¤å…ƒç´ ","link":"python/delInList"},"plink":"ilucia.github.io/Others/k-means/","toc":[{"title":"<a class=\"markdownIt-Anchor\"></a> åœºæ™¯æ¦‚è¿°","id":"åœºæ™¯æ¦‚è¿°","index":"1"},{"title":"<a class=\"markdownIt-Anchor\"></a> å®éªŒç¯å¢ƒ","id":"å®éªŒç¯å¢ƒ","index":"2"},{"title":"<a class=\"markdownIt-Anchor\"></a> åŸºæœ¬åŸç†","id":"åŸºæœ¬åŸç†","index":"3","children":[{"title":"<a class=\"markdownIt-Anchor\"></a> k-means","id":"k-means","index":"3.1"},{"title":"<a class=\"markdownIt-Anchor\"></a> ä¸€äº›ä¸å°½å¦‚äººæ„çš„åœ°æ–¹å’Œé—®é¢˜","id":"ä¸€äº›ä¸å°½å¦‚äººæ„çš„åœ°æ–¹å’Œé—®é¢˜","index":"3.2"}]},{"title":"<a class=\"markdownIt-Anchor\"></a> æˆæœé¢„è§ˆ","id":"æˆæœé¢„è§ˆ","index":"4"},{"title":"<a class=\"markdownIt-Anchor\"></a> è§£å†³æ–¹æ¡ˆ&amp;å®ç°","id":"è§£å†³æ–¹æ¡ˆå®ç°","index":"5"}],"copyright":{"author":"Ilucia Niu","license":"<a rel=\"license\" href=\"http://creativecommons.org/licenses/by/4.0/\">çŸ¥è¯†å…±äº«ç½²å 4.0 å›½é™…è®¸å¯åè®®</a>","published":"2019å¹´7æœˆ15æ—¥","updated":"2022å¹´4æœˆ27æ—¥"}}