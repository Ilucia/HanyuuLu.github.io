{"title":"wsl安装桌面环境","date":"2020-05-24T00:00:00.000Z","link":"wslDesktop","tags":["wsl","xfce","xrdp"],"updated":"2022-04-27T15:24:01.763Z","content":"<h1 id=\"准备工作\"><a class=\"markdownIt-Anchor\" href=\"wslDesktop#准备工作\"></a> 准备工作<a href=\"wslDesktop#准备工作\"></a></h1>\n<ol>\n<li>\n<p>运行有wsl（笔者使用wsl2）的Windows 10电脑一台（必备）</p>\n<blockquote>\n<p><a href=\"https://docs.microsoft.com/zh-cn/windows/wsl/install-win10\" target=\"_blank\" rel=\"noopener\">安装wsl和wsl1升级到wsl2微软官方教程:</a></p>\n</blockquote>\n</li>\n<li>\n<p>wsl里的文本编辑器（vim,nano等）（强烈推荐，笔者此处使用vim）</p>\n<blockquote>\n<p>e.g. (apt作为包管理器，Ubuntu等)</p>\n  <figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;   sudo apt install vim</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></div></figure>\n</blockquote>\n</li>\n<li>\n<p>身居中国大陆并且没给wsl换源或者不知道换源的小伙伴请参阅<a href=\"https://mirrors.tuna.tsinghua.edu.cn/\" target=\"_blank\" rel=\"noopener\">tuna镜像站</a>进行换源（非必须，但是可以大大加快安装速度）</p>\n<blockquote>\n<p>e.g. Ubuntu请参阅<a href=\"https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/\" target=\"_blank\" rel=\"noopener\">Ubuntu 镜像使用帮助</a></p>\n</blockquote>\n</li>\n</ol>\n<h1 id=\"安装xfce4和xrdp\"><a class=\"markdownIt-Anchor\" href=\"wslDesktop#安装xfce4和xrdp\"></a> 安装<a href=\"https://xfce.org/\" target=\"_blank\" rel=\"noopener\">Xfce4</a>和xrdp<a href=\"wslDesktop#安装xfce4和xrdp\"></a></h1>\n<h2 id=\"简介\"><a class=\"markdownIt-Anchor\" href=\"wslDesktop#简介\"></a> 简介<a href=\"wslDesktop#简介\"></a></h2>\n<ul>\n<li>Xfce4是一个轻量可高度定制的类-unix桌面环境，与wsl相性十分相符</li>\n<li>xrdp支持rdp，是Windows原生支持的远程桌面协议，使用“远程桌面连接”即可连接到wsl桌面环境</li>\n</ul>\n<h2 id=\"安装步骤此处以ubuntu-1804-on-windows-10为例\"><a class=\"markdownIt-Anchor\" href=\"wslDesktop#安装步骤此处以ubuntu-1804-on-windows-10为例\"></a> 安装步骤（此处以Ubuntu 18.04 on Windows 10为例）<a href=\"wslDesktop#安装步骤此处以ubuntu-1804-on-windows-10为例\"></a></h2>\n<ol>\n<li>\n<p>更新包管理器</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt update</span><br></pre></td></tr></table></div></figure>\n</li>\n<li>\n<p>安装Xfce4和xrdp</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt install xfce4 xrdp</span><br></pre></td></tr></table></div></figure>\n</li>\n<li>\n<p>更改xrdp配置</p>\n<p><img src=\"wslDesktop/image-20200524221133315.png\" alt=\"image-20200524221133315\" class=\"article-img\"></p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> xfce4-session &gt;~/.xsession</span><br><span class=\"line\">sudo vim /etc/xrdp/startwm.sh</span><br><span class=\"line\"><span class=\"comment\">#/etc/X11/Xsession 前一行插入 xfce4-session</span></span><br></pre></td></tr></table></div></figure>\n</li>\n<li>\n<p>更改xrdp侦听端口</p>\n<p>rdp默认侦听端口为3389，Windows 10本身已经占用（如果开启远程桌面的话），此处为了避免冲突我们更换一下监听端口</p>\n<p><img src=\"wslDesktop/image-20200524221053049.png\" alt=\"image-20200524221053049\" class=\"article-img\"></p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo vim /etc/xrdp/xdrp.ini</span><br><span class=\"line\"><span class=\"comment\">#将port=3389更改为3388或者其他可用端口</span></span><br></pre></td></tr></table></div></figure>\n</li>\n<li>\n<p>重启以使配置生效</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo service xrdp restart</span><br></pre></td></tr></table></div></figure>\n</li>\n<li>\n<p>锵锵！安装完成了。</p>\n</li>\n</ol>\n<h3 id=\"使用步骤\"><a class=\"markdownIt-Anchor\" href=\"wslDesktop#使用步骤\"></a> 使用步骤<a href=\"wslDesktop#使用步骤\"></a></h3>\n<ol>\n<li>\n<p>打开Windows的“远程桌面连接”</p>\n<p><img src=\"wslDesktop/image-20200524220356681.png\" alt=\"image-20200524220356681\" class=\"article-img\"></p>\n</li>\n<li>\n<p>地址填写localhost:3388，（显示选项中可以选择更多显示选项，分辨率，大小等）</p>\n</li>\n</ol>\n<pre><code>![image-20200524220431099](wslDesktop/image-20200524220431099.png)\n</code></pre>\n<ol start=\"3\">\n<li>\n<p>xrdp此时提示输入账户密码（wsl的）</p>\n<p><img src=\"wslDesktop/image-20200524220700925.png\" alt=\"image-20200524220700925\" class=\"article-img\"></p>\n</li>\n<li>\n<p>锵锵！你现在拥有了一个新的桌面环境！</p>\n<p><img src=\"wslDesktop/image-20200524220940420.png\" alt=\"image-20200524220940420\" class=\"article-img\"></p>\n</li>\n</ol>\n<h1 id=\"后续可选内容\"><a class=\"markdownIt-Anchor\" href=\"wslDesktop#后续可选内容\"></a> 后续可选内容<a href=\"wslDesktop#后续可选内容\"></a></h1>\n<ul>\n<li>高分屏调整分辨率</li>\n<li>安装中文字体</li>\n<li>各种美化（</li>\n<li>看心情更</li>\n</ul>\n","prev":{"title":"传感器复习提纲","link":"review_sensor"},"next":{"title":"《疾病的群体现象及其测量》笔记","link":"Epidemiology"},"plink":"ilucia.github.io/wslDesktop/","toc":[{"title":"<a class=\"markdownIt-Anchor\"></a> 准备工作","id":"准备工作","index":"1"},{"title":"<a class=\"markdownIt-Anchor\">Xfce4</a>和xrdp","id":"安装xfce4和xrdp","index":"2","children":[{"title":"<a class=\"markdownIt-Anchor\"></a> 简介","id":"简介","index":"2.1"},{"title":"<a class=\"markdownIt-Anchor\"></a> 安装步骤（此处以Ubuntu 18.04 on Windows 10为例）","id":"安装步骤此处以ubuntu-1804-on-windows-10为例","index":"2.2","children":[{"title":"<a class=\"markdownIt-Anchor\"></a> 使用步骤","id":"使用步骤","index":"2.2.1"}]}]},{"title":"<a class=\"markdownIt-Anchor\"></a> 后续可选内容","id":"后续可选内容","index":"3"}],"copyright":{"author":"Ilucia Niu","license":"<a rel=\"license\" href=\"http://creativecommons.org/licenses/by/4.0/\">知识共享署名 4.0 国际许可协议</a>","published":"2020年5月24日","updated":"2022年4月27日"}}